<!--prettier-ignore-->
<% const storageUsedMB = (Number(currentUser.storageUsed) / 1048576).toFixed(2) %>
<% const storageUsedPercentage = (Number(currentUser.storageUsed) / (10 * 1048576) * 100).toFixed(2) %>
<%
  const meterEndRound = storageUsedPercentage > 98 ? 'rounded-e-full' : '';
%>

<div class="flex flex-col gap-2 px-2">
  <div>
    <p class="mb-1 flex items-center gap-1 text-lg font-semibold">
      <%- include('icon-cloud', { size: 5 }) %> Available storage:
    </p>
    <div class="flex flex-col">
      <p>You are currently using:</p>
      <p>
        <span class="font-semibold"><%= storageUsedMB %></span> /
        <span class="font-semibold">10 MB</span>
      </p>
    </div>
  </div>
  <div
    class="bg-neutral-quaternary mb-4 h-2.5 w-full rounded-full"
    role="progressbar"
    aria-valuenow="<%= storageUsedPercentage %>"
    aria-valuemin="0"
    aria-valuemax="100"
    aria-label="Storage usage: <%= storageUsedMB %> of 10 MB used"
  >
    <div
      class="<%= meterEndRound %> animate-meter-fill h-2.5 rounded-s-full"
      style="
        width: <%= storageUsedPercentage %>%;
        background: linear-gradient(
          to right,
          var(--color-success) 50%,
          var(--color-warning) 60%,
          var(--color-warning) 70%,
          var(--color-danger) 95%
        );
        background-size: <%= storageUsedPercentage > 0 ? (100 / storageUsedPercentage) * 100 : 100 %>% 100%;
      "
    ></div>
  </div>
</div>
