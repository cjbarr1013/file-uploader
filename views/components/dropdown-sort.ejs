<!--prettier-ignore-->
<% 
const sortLabelsObj = { 
  'name,ASC': 'Name (A-Z)', 
  'name,DESC': 'Name (Z-A)', 
  'size,ASC': 'Size (ASC)', 
  'size,DESC': 'Size (DESC)', 
  'updatedAt,ASC': 'Last Updated (ASC)', 
  'updatedAt,DESC': 'Last Updated (DESC)', 
  'format,ASC': 'Format (A-Z)', 
  'format,DESC': 'Format (Z-A)' 
}; 

const sortLabelsList = [
  { value: 'name,ASC', label: 'Name (A-Z)' },
  { value: 'name,DESC', label: 'Name (Z-A)' },
  { value: 'size,ASC', label: 'Size (ASC)' },
  { value: 'size,DESC', label: 'Size (DESC)' },
  { value: 'updatedAt,ASC', label: 'Last Updated (ASC)' },
  { value: 'updatedAt,DESC', label: 'Last Updated (DESC)' },
  { value: 'format,ASC', label: 'Format (A-Z)' },
  { value: 'format,DESC', label: 'Format (Z-A)' },
]; 
%>

<form action="/user/sort-preference" method="post" id="sort-form">
  <%- include('../components/form-hidden-input') %>
  <input
    type="hidden"
    name="sortPreference"
    id="sort-value"
    value="<%= currentUser.sortPreference || '' %>"
  />

  <button
    id="sort-dropdown-button"
    data-dropdown-toggle="sort-dropdown"
    data-dropdown-placement="bottom-end"
    type="button"
    class="flex items-center gap-2"
    aria-label="Sort options"
    <%= disabled ? ' disabled' : '' %>
  >
    <svg
      class="h-6 w-6 text-gray-800 md:h-5 md:w-5 dark:text-white"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M8 20V10m0 10-3-3m3 3 3-3m5-13v10m0-10 3 3m-3-3-3 3"
      />
    </svg>

    <span class="hidden md:inline md:text-base">
      <%= currentUser.sortPreference ? sortLabelsObj[currentUser.sortPreference]
      : 'Sort' %>
    </span>

    <svg
      class="h-6 w-6 text-gray-800 md:h-5 md:w-5 dark:text-white"
      aria-hidden="true"
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      fill="none"
      viewBox="0 0 24 24"
    >
      <path
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="m8 10 4 4 4-4"
      />
    </svg>
  </button>

  <div
    id="sort-dropdown"
    class="z-10 hidden w-48 dropdown-menu"
  >
    <ul aria-labelledby="sort-dropdown-button">
      <% sortLabelsList.forEach(option => { %>
      <li>
        <button
          type="button"
          class="inline-flex"
          onclick="document.getElementById('sort-value').value='<%= option.value %>'; this.form.submit();"
        >
          <%= option.label %>
        </button>
      </li>
      <% }); %>
    </ul>
  </div>
</form>
